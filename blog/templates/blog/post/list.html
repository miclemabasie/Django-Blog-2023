{% extends "blog/base.html" %}

{% block content %}
<h1>My Blog</h1>

{% if tag %}
    <h2>Posts tagged with "{{ tag.name}}"</h2>
{% endif %}

{% for post in post_list %}
<div class="post-container">
    <a href="{{ post.get_absolute_url }}">
        <h2 class="post-title">{{ post.title }}</h2>
    </a>
    {% for tag in post.tags.all %}
        <a href="{% url 'blog:post_list_by_tag' tag.slug %}">
            {{tag.name}}
        </a>
        {% if not fooloop.last %}, {% endif %}
    {% endfor %}
    <p class="date">
        Published {{ post.publish }} by {{ post.author }}
    </p>
    <p class="post-content">
        {{post.body|truncatewords:3|linebreaks}}
    </p>
</div>
{% endfor %}

{% include "blog/pagination.html" with page=post_list%}
{% endblock content %}